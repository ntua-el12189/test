Για να γίνει δυνατό το (2) το repo σας πρέπει να περιέχει configuration αρχεία για docker containers, με τρόπο που μετά από git pull και κατόπιν docker compose up, να λειτουργεί πλήρως το λογισμικό σας. Είναι υποχρεωτικό στο αρχείο docker-compose.yml να περιέχονται οι κατάλληλες ρυθμίσεις και συγκεκριμένα: 

το IP από το οποίο θα τρέχει η εφαρμογή σας πρέπει να είναι υποχρεωτικά 147.102.1.169
το port από το οποίο θα "βγαίνει" το frontend πρέπει να είναι υποχρεωτικά 4007
Αν όλα λειτουργούν σωστά, εμείς θα κάνουμε τα εξής βήματα: 

στον υπολογιστή με IP 147.102.1.169, θα εκτελέσουμε git clone <your_repo>
στον υπολογιστή με IP 147.102.1.169, μέσα στο φάκελο του repo σας, θα εκτελέσουμε docker compose up. Αυτό θα πρέπει να προκαλέσει το κατέβασμα και την εκτέλεση όλων των services της εφαρμογής σας
σε τρίτο υπολογιστή, θα ανοίξουμε browser στη διεύθυνση 147.102.1.169:4007, στον οποίο πρέπει να φαίνεται το frontend.
Για να δείτε πώς πρέπει να είναι γραμμένο το docker-compose.yml, μπορείτε να κάνετε clone το repository https://github.com/ChristosHadjichristofi/SaaS77-NTUA στον δικό σας υπολογιστή. Ακολούθως, μέσα στο χώρο που κάνατε clone, μπαίνετε στον φάκελο saas-77-microservices και στο αρχείο docker-compose.yml που περιέχεται σε εκείνον τον φάκελο, αλλάζετε το IP 172.19.33.2 με το IP του δικού σας υπολογιστή (your-IP). Κάνοντας docker compose up θα πρέπει να σηκωθεί η εφαρμογή και να λειτουργεί στον δικό σας υπολογιστή, μπαίνοντας σε browser στο [your-IP]:4007.

Στο docker-compose.yml της δικής σας εργασίας, θα πρέπει να κάνετε όλες τις αλλαγές που απαιτούνται. Πχ το αρχείο της εφαρμογής SaaS77-NTUA περιέχει διάφορα instances για postges κ.ά. microservices εκείνης της εργασίας που χρησιμοποιούμε ως παράδειγμα. Εσείς θα πρέπει να το προσαρμόσετε ανάλογα.

Σημαντικό: αφού πρώτα βεβαιωθείτε ότι η εφαρμογή σας τρέχει με αυτό τον τρόπο σε έναν οποιοδήποτε άλλο δικό σας υπολογιστή (φίλου σας κλπ), πριν κάνετε το τελευταίο commit, θα ΠΡΕΠΕΙ να αντικαταστήσετε το [your-IP] με το 147.102.1.169. Το port (επαναλαμβάνουμε) για το frontend θα είναι υποχρεωτικά το 4007.

Για οποιαδήποτε απορία επί της συγκεκριμένης διαδικασίας, παρακαλείστε να απαντάτε σε παρόν thread και να μην στέλνετε email.



Διευκρινήσεις:

1:
Καλησπέρα κ Βεσκούκη,
δεδομένου ότι απαιτείται static IP σε επίπεδο local δικτύου (αφού θα μπείτε από άλλο pc στο front-end), αυτό συνιστά το macvlan driver στο docker, το οποίο με τη σειρά του απαιτεί τη διεύθυνση του gateway για το δικό σας local δίκτυο (η οποία μας είναι άγνωστη). Καμία κατεύθυνση, κάνω κάτι λάθος;
Φωτογραφία Βασίλειος Βεσκούκης
Σε απάντηση σε Δημητριος Χαραλαμπης
Re: Απάντηση:
από Βασίλειος Βεσκούκης 
Στην εγκατάσταση που κάναμε με την εργασία του Χ.Χατζηχριστοφή και σας στείλαμε ως παράδειγμα, δεν χρειάστηκε.
Αν, όμως, το χρειάζεστε, το gateway είναι το 147.102.1.200.
Αν και δεν είναι απαραίτητο να χρησιμοποιηθεί αυτό το DNS service, το DNS του ΕΜΠ είναι 147.102.222.210. Σημειώστε ότι λειτουργεί ΜΟΝΟ για διευθύνσεις εντός του ΕΜΠ (147.102.0.0/16).

2:


Καλησπέρα,
Θα μας στείλετε κάποιο email από το οποίο θα γίνει το testing ώστε να προστεθεί στο google cloud console (OAuth consent screen). Ή θα πρέπει να βάλουμε το google cloud console project σε production mode (publish) προκειμένου να δέχεται όλα τα mail; Αν κάνουμε αυτό χρειάζεται όλες οι συνδέσεις να είναι με HTTPS (αναγκαστικά από την google) και το πρόβλημα είναι ότι δεν μπορούμε να κάνουμε issue certificate για όχι δικό μας  domain. Μπορούμε να κάνουμε self-signed αλλά αυτό προδιαθέτει ότι θα μπείτε στην διαδικασία να το κάνετε trust (διαφορετικά σκάνε τα calls προς τον orchestrator).

Σε απάντηση σε Παναγιωτης Στεφανης
Re: Email για προσθήκη στο google cloud console
από Βασίλειος Βεσκούκης - Δευτέρα, 3 Ιουλίου 2023, 8:06 μμ
Δεν είναι μεγάλο πρόβλημα να κάνουμε trust το πιστοποιητικό σας.
Αλλά για κάθε περίπτωση, μπορείτε να θεωρήσετε ότι το testing θα γίνει από το ntuasoftlab@gmail.com



3:

Για το google authentication έχουμε χρησιμοποιήσει το keycloak σε local docker container (δεν είναι deployed στο cloud), το πρόβλημα είναι ότι το google cloud console δεν δέχεται αιτήσεις από ip (http://147.102.1.169:8080/auth....) και δέχεται μόνο από κάποιο domain (localhost ή άλλο domain). Πως μπορούμε να λύσουμε αυτό το πρόβλημα; Βρήκαμε το domain για αυτόν τον server ότι είναι το davinci.softlab.ece.ntua.gr, θα μπορούμε να χρησιμοποιήσουμε αυτό το domain αντί της ip που μας δώσατε;

Παρακάτω φαίνεται το πρόβλημα που περιγράφω στο google cloud console:




Φωτογραφία Βασίλειος Βεσκούκης
Re: Πρόβλημα google authentication και δωσμένης ip
από Βασίλειος Βεσκούκης μ
Μπορείτε να χρησιμοποιήσετε αυτό που βρήκατε...

➜ ~ nslookup 147.102.1.169
Server: ...
Address: ...

Non-authoritative answer:
169.1.102.147.in-addr.arpa name = davinci.softlab.ece.ntua.gr